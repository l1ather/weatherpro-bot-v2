# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - WeatherPro Bot v2

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Redis
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <your-repo>
cd weather_bot

# 2. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker
docker-compose up -d

# 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f bot

# 5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <your-repo>
cd weather_bot

# 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/Mac)
source venv/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Redis (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# Linux/Mac
redis-server

# Windows (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Redis –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker)
docker run -d -p 6379:6379 redis:7-alpine

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python bot.py

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

### Telegram Bot Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /newbot
1. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
- –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: My Weather Bot)
- –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ bot, –Ω–∞–ø—Ä–∏–º–µ—Ä: my_weather_bot)
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω
1. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ .env —Ñ–∞–π–ª:
   
     BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
   
### OpenWeather API Key

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [OpenWeatherMap](https://openweathermap.org/)
1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É [API Keys](https://home.openweathermap.org/api_keys)
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π
1. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ .env —Ñ–∞–π–ª:
   
     OPENWEATHER_API_KEY=your_api_key_here
   
‚ö†Ô∏è –í–∞–∂–Ω–æ: –ù–æ–≤—ã–µ API –∫–ª—é—á–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10-120 –º–∏–Ω—É—Ç!

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
# Telegram
BOT_TOKEN=your_bot_token

# OpenWeather
OPENWEATHER_API_KEY=your_api_key

# Redis (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ)
REDIS_HOST=localhost
REDIS_PORT=6379

–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
# Telegram
BOT_TOKEN=your_bot_token

# OpenWeather API
OPENWEATHER_API_KEY=your_api_key
OPENWEATHER_BASE_URL=https://api.openweathermap.org/data/2.5

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache Settings (seconds)
CACHE_TTL=3600
FORECAST_CACHE_TTL=7200

# API Settings
API_TIMEOUT=10
MAX_RETRIES=3

# Database
DATABASE_URL=sqlite:///weather_bot.db

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
# –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

- –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –ø–æ username
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
/start          - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
–ú–æ—Å–∫–≤–∞          - –ü–æ–≥–æ–¥–∞ –≤ –≥–æ—Ä–æ–¥–µ
üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–≤–æ—é –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
üìÖ –ü—Ä–æ–≥–Ω–æ–∑      - –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π
‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ    - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –≤ .env
1. –ó–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç (`docker-compose ps` –∏–ª–∏ `ps aux | grep python`)
1. –õ–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

–†–µ—à–µ–Ω–∏–µ:
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
docker-compose restart bot

# –ò–ª–∏
python bot.py

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

–û—à–∏–±–∫–∞: Error connecting to Redis

–†–µ—à–µ–Ω–∏–µ:
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ Redis
docker-compose ps redis

# –ò–ª–∏
redis-cli ping

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω - –∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose up -d redis

### OpenWeather API –æ—à–∏–±–∫–∏

–û—à–∏–±–∫–∞: 401 Unauthorized

–ü—Ä–∏—á–∏–Ω—ã:

- –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- –ö–ª—é—á –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (–ø–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 2 —á–∞—Å–æ–≤)

–†–µ—à–µ–Ω–∏–µ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –Ω–∞ [—Å—Ç—Ä–∞–Ω–∏—Ü–µ API Keys](https://home.openweathermap.org/api_keys)
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω (Status: Active)
1. –û–±–Ω–æ–≤–∏—Ç–µ .env –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

–û—à–∏–±–∫–∞: 429 Too Many Requests

–ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (60/–º–∏–Ω—É—Ç—É –¥–ª—è free tier)

–†–µ—à–µ–Ω–∏–µ:

- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1 –º–∏–Ω—É—Ç—É
- –ö–µ—à –¥–æ–ª–∂–µ–Ω —Å–Ω–∏–∂–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ Redis

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ SQLAlchemy

–†–µ—à–µ–Ω–∏–µ:
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –ë–î –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é
rm weather_bot.db